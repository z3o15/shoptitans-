# 📝 OCR识别 流程说明报告

**步骤ID**: step5_ocr

**生成时间**: 2025-11-24 13:48:47

**描述**: 文字识别和数量提取步骤

## 📝 OCR识别流程说明

### 步骤目的和功能说明
OCR识别步骤是装备识别系统的最后阶段，主要负责：
- 从装备图片中识别金额信息
- 应用多种OCR引擎和配置策略
- 格式化和标准化识别结果

### 使用的算法和方法
1. **多引擎OCR识别**：支持Tesseract等多种OCR引擎
2. **配置回退机制**：当主配置失败时自动切换备用配置
3. **图像预处理**：背景掩码、对比度增强、噪声去除
4. **文本后处理**：金额格式化、错误纠正

### 处理流程的详细步骤
1. **图像预处理**
   - 加载装备图片
   - 创建背景掩码去除背景色
   - 应用图像增强算法
   - 生成掩码后图像

2. **OCR识别**
   - 使用主配置进行OCR识别
   - 如果识别失败，切换到备用配置
   - 尝试多种OCR引擎和参数
   - 获取识别文本和置信度

3. **文本后处理**
   - 清理识别结果（去除空格、特殊字符）
   - 格式化金额（处理逗号、空格、k表示法）
   - 验证金额合理性
   - 标准化输出格式

4. **结果记录**
   - 保存识别结果到CSV文件
   - 记录处理时间和置信度
   - 生成对比图像用于验证
   - 创建处理日志

### 配置参数和选项说明
- **OCR引擎**：Tesseract（主引擎）
- **语言配置**：eng（英文）
- **预处理选项**：背景掩码、对比度增强
- **回退策略**：多配置自动切换
- **金额格式**：支持逗号、空格、k表示法
- **置信度阈值**：0.5（可配置）

### 输入输出格式说明
- **输入**：带金额标记的装备图片（JPG/PNG）
- **输出**：识别结果（CSV）、掩码图像（PNG）、对比图像（JPG）

### 可能的异常情况处理
- OCR识别失败：尝试备用配置
- 金额格式错误：应用格式化规则
- 图像加载失败：跳过并记录错误
- 配置文件缺失：使用默认配置

## 📅 处理时间

- **开始时间**: 2025-11-24 13:48:47

## 📊 处理统计

| 项目 | 数量 |
|------|------|
| 处理项目 | 10 |
| 成功项目 | 8 |
| 失败项目 | 2 |
| 警告数量 | 1 |
| 成功率 | 80.0% |

## 📁 输出文件说明

本步骤的处理结果保存在以下文件中：

├── images/
├── txt/
├── log.txt

---
*流程说明报告由系统自动生成于 2025-11-24 13:48:47*
*具体处理结果请查看对应的txt文件*

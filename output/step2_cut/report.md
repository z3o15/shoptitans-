# ✂️ 图片裁剪 流程说明报告

**步骤ID**: step2_cut

**生成时间**: 2025-11-24 13:51:08

**描述**: 截图裁剪和预处理步骤

## ✂️ 图片裁剪流程说明

### 步骤目的和功能说明
图片裁剪步骤是装备识别系统的核心预处理阶段，主要负责：
- 从游戏截图中分割出单个装备图片
- 应用背景掩码和透明化处理
- 生成标准化的装备图片用于后续匹配

### 使用的算法和方法
1. **固定坐标切割**：使用预定义的网格参数进行精确切割
2. **背景掩码**：使用颜色范围检测创建背景掩码
3. **圆形掩码**：创建圆形区域保留装备，去除背景
4. **透明化处理**：将圆形背景设为透明，替换黑色区域

### 处理流程的详细步骤
1. **截图分析**
   - 加载游戏截图
   - 验证图像尺寸和格式
   - 确定切割参数

2. **固定坐标切割**
   - 使用6列2行的网格布局
   - 按预定义坐标切割装备
   - 生成矩形装备图片

3. **圆形标记处理**
   - 在装备图片上绘制圆形标记
   - 保存带标记的副本用于对比
   - 生成圆形填充版本

4. **透明背景处理**
   - 创建圆形掩码（半径55像素）
   - 检测并去除背景色（深紫色、浅紫色）
   - 将圆形外设为透明
   - 替换圆形内黑色区域为指定颜色

5. **文件重命名**
   - 按顺序重命名为01.png, 02.png...
   - 统一文件格式和命名规范

### 配置参数和选项说明
- **网格参数**：6列2行，间距120x140像素
- **圆形半径**：55像素
- **背景色范围**：深紫色(46,33,46)、浅紫色(241,240,241)
- **替换颜色**：#39212e (57,33,46)
- **输出格式**：PNG（支持透明背景）

### 输入输出格式说明
- **输入**：游戏截图（PNG/JPG/JPEG/WEBP）
- **输出**：透明背景装备图片（PNG）、带标记图片（JPG）

### 可能的异常情况处理
- 截图尺寸不符：自动调整切割参数
- 背景色检测失败：使用默认掩码
- 文件命名冲突：自动覆盖旧文件

## 📅 处理时间

- **开始时间**: 2025-11-24 13:51:07

## 📊 处理统计

| 项目 | 数量 |
|------|------|
| 处理项目 | 1 |
| 成功项目 | 42 |
| 失败项目 | 0 |
| 警告数量 | 0 |
| 成功率 | 4200.0% |

## 📁 输出文件说明

本步骤的处理结果保存在以下文件中：

├── images/
│   ├── 20251124_135107/
│   │   ├── 01.jpg
│   │   ├── 02.jpg
│   │   ├── 03.jpg
│   │   ├── 04.jpg
│   │   ├── 05.jpg
│   │   ├── 06.jpg
│   │   ├── 07.jpg
│   │   ├── 08.jpg
│   │   ├── 09.jpg
│   │   └── 10.jpg
│   ├── marker_20251124_135107/
│   │   ├── 01.jpg
│   │   ├── 02.jpg
│   │   ├── 03.jpg
│   │   ├── 04.jpg
│   │   ├── 05.jpg
│   │   ├── 06.jpg
│   │   ├── 07.jpg
│   │   ├── 08.jpg
│   │   ├── 09.jpg
│   │   └── 10.jpg
│   ├── 01.png
│   ├── 02.png
│   ├── 03.png
│   ├── 04.png
│   ├── 05.png
│   ├── 06.png
│   ├── 07.png
│   ├── 08.png
│   ├── 09.png
│   └── 10.png
├── txt/
├── log.txt

---
*流程说明报告由系统自动生成于 2025-11-24 13:51:08*
*具体处理结果请查看对应的txt文件*
